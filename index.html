<!DOCTYPE html>
<html>
<head>
    <title>Sols Rng Calculator</title>
    <style>
        body { font-family: sans-serif; padding: 20px; background: #0b0b0e; color: white; display: flex; justify-content: center; }
        .calc-card { width: 100%; max-width: 400px; background: #16161d; padding: 25px; border-radius: 12px; border: 2px solid #3e3e4a; box-shadow: 0 8px 32px rgba(0,0,0,0.5); }
        h2 { color: white; text-align: center; text-transform: uppercase; margin-top: 0; margin-bottom: 20px; letter-spacing: 1px; }
        
        .mode-switch { display: flex; background: #000; border-radius: 10px; padding: 6px; margin-bottom: 25px; border: 2px solid #444; }
        .mode-btn { flex: 1; padding: 14px; border: none; background: none; color: #888; cursor: pointer; font-weight: 900; font-size: 0.85rem; transition: all 0.2s; border-radius: 7px; text-transform: uppercase; }
        .mode-btn.active { background: #add8e6; color: #000; box-shadow: 0 0 20px rgba(173, 216, 230, 0.4); transform: scale(1.02); }

        .section { margin-bottom: 15px; padding: 12px; background: #1c1c26; border-radius: 8px; }
        .rarity-container { display: flex; align-items: center; background: #000; border: 1px solid #444; border-radius: 5px; padding: 0 10px; margin: 8px 0; }
        .prefix { color: white; font-weight: bold; margin-right: 5px; font-size: 1.1rem; }
        .rarity-input { border: none !important; margin: 0 !important; outline: none; }
        
        input, select { width: 100%; padding: 10px; margin: 8px 0; border-radius: 5px; border: 1px solid #444; background: #000; color: white; font-weight: bold; box-sizing: border-box; font-size: 1rem; }
        label { font-size: 0.85rem; color: #ccc; display: block; }
        
        .check-row { display: flex; align-items: center; gap: 8px; margin: 5px 0; cursor: pointer; font-size: 0.75rem; color: #888; }
        .check-row input { width: auto; margin: 0; }

        #rainyContainer { background: rgba(0, 150, 255, 0.1); border: 1px dashed rgba(0, 150, 255, 0.4); padding: 5px 10px; border-radius: 5px; margin-top: 5px; display: none; }

        .result-box { background: rgba(0, 150, 255, 0.15); padding: 20px; border-radius: 8px; border: 1px solid rgba(0, 150, 255, 0.5); text-align: center; margin-top: 10px; }
        .result-val { font-size: 2.2rem; font-weight: bold; color: #add8e6; text-shadow: 0 0 12px rgba(173, 216, 230, 0.7); }
        
        .footer { display: flex; justify-content: space-between; align-items: flex-end; margin-top: 25px; padding-top: 10px; border-top: 1px solid #333; }
        .discord-link { color: #7289da; font-size: 0.75rem; text-decoration: none; font-weight: bold; display: block; margin-bottom: 2px; }
        .reset-btn { background: #2a2a35; color: #ccc; border: 1px solid #444; padding: 6px 12px; border-radius: 4px; font-size: 0.75rem; cursor: pointer; }
        .disclaimer { font-size: 0.65rem; color: #666; margin-top: 12px; line-height: 1.3; text-align: center; font-style: italic; }
    </style>
</head>
<body>

<div class="calc-card">
    <form id="calcForm">
        <h2>Sols Rng Calculator</h2>
        
        <div class="mode-switch">
            <button type="button" id="btnChance" class="mode-btn active" onclick="setMode('chance')">ROLL CHANCE (%)</button>
            <button type="button" id="btnTime" class="mode-btn" onclick="setMode('time')">TIME REQUIRED</button>
        </div>

        <div class="section">
            <label>Rarity of Aura</label>
            <div class="rarity-container">
                <span class="prefix">1/</span>
                <input type="number" id="rarity" class="rarity-input" value="2500000000">
            </div>

            <div id="rainyContainer">
                <label class="check-row" style="color: #add8e6;">
                    <input type="checkbox" id="isRainy"> Rainy Aura? (Rarity / 4 on Bonus)
                </label>
            </div>

            <label>Current luck without left glove</label>
            <input type="number" id="luck" value="30">

            <label>Left hand glove</label>
            <select id="mult" onchange="checkRainySupport()">
                <option value="1.98">Unfathomable Ruins</option>
                <option value="1.8">Darkshader</option>
                <option value="pole">Pole Light Core Device</option>
                <option value="grav">Gravitational Device</option>
                <option value="1.3">Flesh Device</option>
                <option value="jackpot">Jackpot Gauntlet</option>
                <option value="gemstone">Gemstone Gauntlet</option>
                <option value="xmas" class="event-item" data-event="true" style="display:none;">X-Mas Champion</option>
                <option value="present" class="event-item" data-event="true" style="display:none;">Present Giver</option>
                <option value="blessed" class="event-item" data-event="true" style="display:none;">Blessed Tide Gauntlet</option>
                <option value="tide" class="event-item" data-event="true" style="display:none;">Tide Gauntlet</option>
                <option value="1.35" class="event-item" data-event="true" style="display:none;">Ominous Coffin</option>
            </select>
            
            <label class="check-row">
                <input type="checkbox" id="showEvent" onchange="toggleEventGear()"> Show Event Gear
            </label>

            <label>Roll Speed (Rolls / Seconds)</label>
            <div style="display:flex; gap:10px;">
                <input type="number" id="speedR" value="20">
                <input type="number" id="speedS" value="10">
            </div>
        </div>

        <div id="sectionChance" class="section">
            <label>Time Period (Days)</label>
            <input type="number" id="days" placeholder="Days to roll">
            <div class="result-box">
                <label style="color: white; font-size: 0.75rem; opacity: 0.8;">CHANCE OF SUCCESS</label>
                <div class="result-val" id="outputChance">0.00%</div>
            </div>
        </div>

        <div id="sectionTime" class="section" style="display:none;">
            <label>Target Success Rate (%)</label>
            <input type="number" id="targetP" placeholder="Target % (e.g. 50)">
            <div class="result-box">
                <label style="color: white; font-size: 0.75rem; opacity: 0.8;">TIME REQUIRED</label>
                <div class="result-val" id="outputTime">-- Days</div>
            </div>
        </div>

        <div class="disclaimer">
            *Results are based on statistical averages. Actual luck may vary.
        </div>

        <div class="footer">
            <div class="footer-left">
                <a href="https://discord.gg/yTreH64JBC" class="discord-link" target="_blank">Join The Discord!</a>
                <div style="font-size:0.7rem; color:#666;">Created by LubJub</div>
            </div>
            <button type="button" class="reset-btn" onclick="fullReset()">Reset</button>
        </div>
    </form>
</div>

<script>
    let currentMode = 'chance';

    function setMode(mode) {
        currentMode = mode;
        document.getElementById('sectionChance').style.display = (mode === 'chance') ? 'block' : 'none';
        document.getElementById('sectionTime').style.display = (mode === 'time') ? 'block' : 'none';
        document.getElementById('btnChance').classList.toggle('active', mode === 'chance');
        document.getElementById('btnTime').classList.toggle('active', mode === 'time');
        calculate();
    }

    function fullReset() {
        document.getElementById('calcForm').reset();
        document.getElementById('showEvent').checked = false;
        toggleEventGear();
        checkRainySupport();
        setMode('chance');
    }

    function toggleEventGear() {
        const isChecked = document.getElementById('showEvent').checked;
        const select = document.getElementById('mult');
        const items = document.getElementsByClassName('event-item');
        if (!isChecked && select.options[select.selectedIndex].getAttribute('data-event') === "true") {
            select.value = "1.98";
        }
        for (let item of items) { item.style.display = isChecked ? "block" : "none"; }
        checkRainySupport();
    }

    function checkRainySupport() {
        const glove = document.getElementById('mult').value;
        const container = document.getElementById('rainyContainer');
        container.style.display = (glove === "tide" || glove === "blessed") ? "block" : "none";
        calculate();
    }

    function calculate() {
        const R_base = parseFloat(document.getElementById('rarity').value) || 1;
        const baseL = parseFloat(document.getElementById('luck').value) || 0;
        const glove = document.getElementById('mult').value;
        const isRainy = document.getElementById('isRainy').checked;
        
        let pAvg;
        let speedMult = 1;
        const rainyDiv = isRainy ? 4 : 1;

        if (glove === "blessed") {
            pAvg = (5 * (baseL / R_base) + 1 * ((baseL * 3) / (R_base / rainyDiv))) / 6;
        } else if (glove === "tide") {
            pAvg = (9 * ((baseL + 0.5) / R_base) + 1 * (((baseL + 0.5) * 2) / (R_base / rainyDiv))) / 10;
        } else {
            let L = baseL, M = 1;
            if (glove === "pole") { 
                L += 5; 
                M = 1.1; 
                speedMult = 34 / 30; // Accounts for 5 burst rolls every 30 rolls
            }
            else if (glove === "grav") { M = 1.5; }
            else if (glove === "jackpot") { L += 0.77; }
            else if (glove === "gemstone") { L += 0.075; }
            else if (glove === "xmas") { M = 1.5; }
            else if (glove === "present") { M = 1.36; }
            else { M = parseFloat(glove) || 1; }
            pAvg = (L * M) / R_base;
        }

        const rInput = parseFloat(document.getElementById('speedR').value) || 1;
        const sInput = parseFloat(document.getElementById('speedS').value) || 1;
        const rollsPerDay = (rInput / sInput) * 86400 * speedMult;

        const d = parseFloat(document.getElementById('days').value) || 0;
        const P = d > 0 ? 1 - Math.pow((1 - pAvg), (rollsPerDay * d)) : 0;
        document.getElementById('outputChance').innerText = (P * 100).toFixed(2) + "%";

        const targetP = (parseFloat(document.getElementById('targetP').value) || 0) / 100;
        if (targetP > 0 && targetP < 1 && pAvg > 0) {
            const neededDays = (Math.log(1 - targetP) / Math.log(1 - pAvg)) / rollsPerDay;
            document.getElementById('outputTime').innerText = Math.max(0, neededDays).toFixed(2) + " Days";
        } else {
            document.getElementById('outputTime').innerText = "-- Days";
        }
    }

    document.querySelectorAll('input, select').forEach(el => el.oninput = calculate);
    calculate();
</script>

</body>
</html>
